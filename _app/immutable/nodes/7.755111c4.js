import{s as re,n as S,c as ue,d as de,e as Te,o as He}from"../chunks/scheduler.8159148a.js";import{S as oe,i as ce,g as h,m as q,s as z,h as g,j as $,n as R,f as _,c as A,k as d,a as j,z as f,C as Le,o as se,e as le,x as ae,r as Y,u as K,v as U,d as H,t as L,w as J,A as xe,B as ze,p as he,b as ge,G as Ae}from"../chunks/index.4ec63fb7.js";import{m as De,a as fe,s as je}from"../chunks/index.606076a0.js";import{z as C}from"../chunks/index.ced1acf2.js";import{f as _e,t as Ee}from"../chunks/timeInterval.508b7975.js";import{I as Ie,g as Ne,a as Se,e as me,u as Fe,o as Ge}from"../chunks/IconBase.2a01f74c.js";function we(a){const l=parseInt(a);return l?a.includes("M")?l*1024:a.includes("G")?l*1048576:a.includes("T")?l*1073741824:l:0}function Pe(a,e){let t=Array.from(a);if(e.key==="name")t=a.sort((s,l)=>s.name.localeCompare(l.name));else if(e.key==="size")t=a.sort((s,l)=>we(s.size)-we(l.size));else if(e.key==="update")t=a.sort((s,l)=>new Date(l.last_update).getTime()-new Date(s.last_update).getTime());else if(e.key==="status"){const s=a.filter(o=>o.status==="failed"),l=a.filter(o=>o.status==="syncing"),n=a.filter(o=>o.status==="success");t=[...s,...l,...n]}return e.asc&&(t=t.reverse()),t}const Ve=C.object({name:C.string(),is_master:C.boolean(),status:C.enum(["success","failed","syncing"]),last_update:C.string(),last_update_ts:C.number(),last_started:C.string(),last_started_ts:C.number(),last_ended:C.string(),last_ended_ts:C.number(),next_schedule:C.string(),next_schedule_ts:C.number(),upstream:C.string(),size:C.string()});async function Oe(){try{const a=await fetch("https://mirrors.njtech.edu.cn/jobs").then(t=>t.json()),e=C.array(Ve).parse(a);return De.set(e),!0}catch(a){return console.error(a),!1}}function qe(a,e){const t=["name","size","last_update","status"];return a.filter(s=>t.some(l=>{var n;return l==="last_update"?_e(s[l]).includes(e):(n=s[l])==null?void 0:n.toLowerCase().includes(e)}))}function Me(a){let e;function t(n,o){return n[2].asc?Ye:Re}let s=t(a),l=s(a);return{c(){l.c(),e=le()},l(n){l.l(n),e=le()},m(n,o){l.m(n,o),j(n,e,o)},p(n,o){s!==(s=t(n))&&(l.d(1),l=s(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){n&&_(e),l.d(n)}}}function Re(a){let e,t="↓";return{c(){e=h("span"),e.textContent=t,this.h()},l(s){e=g(s,"SPAN",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-mnyoiy"&&(e.textContent=t),this.h()},h(){d(e,"class","text-blue-600")},m(s,l){j(s,e,l)},d(s){s&&_(e)}}}function Ye(a){let e,t="↑";return{c(){e=h("span"),e.textContent=t,this.h()},l(s){e=g(s,"SPAN",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-j38dh8"&&(e.textContent=t),this.h()},h(){d(e,"class","text-blue-600")},m(s,l){j(s,e,l)},d(s){s&&_(e)}}}function Ke(a){let e,t,s,l,n,o,i=a[2].key===a[1]&&Me(a);return{c(){e=h("button"),t=h("span"),s=q(a[0]),l=z(),i&&i.c(),this.h()},l(c){e=g(c,"BUTTON",{type:!0});var r=$(e);t=g(r,"SPAN",{});var v=$(t);s=R(v,a[0]),v.forEach(_),l=A(r),i&&i.l(r),r.forEach(_),this.h()},h(){d(e,"type","button")},m(c,r){j(c,e,r),f(e,t),f(t,s),f(e,l),i&&i.m(e,null),n||(o=Le(e,"click",a[3]),n=!0)},p(c,[r]){r&1&&se(s,c[0]),c[2].key===c[1]?i?i.p(c,r):(i=Me(c),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:S,o:S,d(c){c&&_(e),i&&i.d(),n=!1,o()}}}function Ue(a,e,t){let s;ue(a,fe,i=>t(2,s=i));let{title:l}=e,{name:n}=e;function o(){fe.set({key:n,asc:s.key===n?!s.asc:s.asc})}return a.$$set=i=>{"title"in i&&t(0,l=i.title),"name"in i&&t(1,n=i.name)},[l,n,s,o]}class ie extends oe{constructor(e){super(),ce(this,e,Ue,Ke,re,{title:0,name:1})}}function Je(a){let e;return{c(){e=xe("path"),this.h()},l(t){e=ze(t,"path",{d:!0}),$(e).forEach(_),this.h()},h(){d(e,"d","M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z")},m(t,s){j(t,e,s)},p:S,d(t){t&&_(e)}}}function Qe(a){let e,t;const s=[{viewBox:"0 0 24 24"},a[0]];let l={$$slots:{default:[Je]},$$scope:{ctx:a}};for(let n=0;n<s.length;n+=1)l=de(l,s[n]);return e=new Ie({props:l}),{c(){Y(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){U(e,n,o),t=!0},p(n,[o]){const i=o&1?Ne(s,[s[0],Se(n[0])]):{};o&2&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function We(a,e,t){return a.$$set=s=>{t(0,e=de(de({},e),Te(s)))},e=Te(e),[e]}class Xe extends oe{constructor(e){super(),ce(this,e,We,Qe,re,{})}}function Be(a,e,t){const s=a.slice();return s[1]=e[t],s}function Ce(a,e){let t,s,l=e[1].name+"",n,o,i,c=_e(e[1].last_update)+"",r,v,p=Ee(e[1].last_update)+"",w,I,F,M,P=e[1].size+"",x,Z,N,T,k=e[1].status+"",Q,V,O,G,u,m,y,W,B,X,ee,E;return y=new Xe({}),{key:a,first:null,c(){t=h("tr"),s=h("td"),n=q(l),o=z(),i=h("td"),r=q(c),v=q(" ("),w=q(p),I=q(")"),F=z(),M=h("td"),x=q(P),Z=z(),N=h("td"),T=h("div"),Q=q(k),O=z(),G=h("td"),u=h("a"),m=h("div"),Y(y.$$.fragment),ee=z(),this.h()},l(D){t=g(D,"TR",{class:!0});var b=$(t);s=g(b,"TD",{"data-cell":!0,class:!0});var te=$(s);n=R(te,l),te.forEach(_),o=A(b),i=g(b,"TD",{"data-cell":!0,class:!0});var ne=$(i);r=R(ne,c),v=R(ne," ("),w=R(ne,p),I=R(ne,")"),ne.forEach(_),F=A(b),M=g(b,"TD",{"data-cell":!0,class:!0});var ve=$(M);x=R(ve,P),ve.forEach(_),Z=A(b),N=g(b,"TD",{"data-cell":!0,class:!0});var pe=$(N);T=g(pe,"DIV",{class:!0,"data-status":!0});var be=$(T);Q=R(be,k),be.forEach(_),pe.forEach(_),O=A(b),G=g(b,"TD",{"data-cell":!0,class:!0});var $e=$(G);u=g($e,"A",{title:!0,"aria-label":!0,class:!0,href:!0});var ke=$(u);m=g(ke,"DIV",{class:!0});var ye=$(m);K(y.$$.fragment,ye),ye.forEach(_),ke.forEach(_),$e.forEach(_),ee=A(b),b.forEach(_),this.h()},h(){d(s,"data-cell","镜像"),d(s,"class","svelte-1glvmda"),d(i,"data-cell","时间"),d(i,"class","svelte-1glvmda"),d(M,"data-cell","大小"),d(M,"class","svelte-1glvmda"),d(T,"class","status svelte-1glvmda"),d(T,"data-status",V=e[1].status),d(N,"data-cell","状态"),d(N,"class","svelte-1glvmda"),d(m,"class","w-5 h-5 hover:text-blue-600 svelte-1glvmda"),d(u,"title",W=e[1].name),d(u,"aria-label",B=e[1].name),d(u,"class","flex items-center justify-center w-fit svelte-1glvmda"),d(u,"href",X=`https://mirrors.njtech.edu.cn/${e[1].name}/`),d(G,"data-cell","资源"),d(G,"class","svelte-1glvmda"),d(t,"class","border border-gray-300 dark:border-gray-500 p-5 rounded-xl svelte-1glvmda"),this.first=t},m(D,b){j(D,t,b),f(t,s),f(s,n),f(t,o),f(t,i),f(i,r),f(i,v),f(i,w),f(i,I),f(t,F),f(t,M),f(M,x),f(t,Z),f(t,N),f(N,T),f(T,Q),f(t,O),f(t,G),f(G,u),f(u,m),U(y,m,null),f(t,ee),E=!0},p(D,b){e=D,(!E||b&1)&&l!==(l=e[1].name+"")&&se(n,l),(!E||b&1)&&c!==(c=_e(e[1].last_update)+"")&&se(r,c),(!E||b&1)&&p!==(p=Ee(e[1].last_update)+"")&&se(w,p),(!E||b&1)&&P!==(P=e[1].size+"")&&se(x,P),(!E||b&1)&&k!==(k=e[1].status+"")&&se(Q,k),(!E||b&1&&V!==(V=e[1].status))&&d(T,"data-status",V),(!E||b&1&&W!==(W=e[1].name))&&d(u,"title",W),(!E||b&1&&B!==(B=e[1].name))&&d(u,"aria-label",B),(!E||b&1&&X!==(X=`https://mirrors.njtech.edu.cn/${e[1].name}/`))&&d(u,"href",X)},i(D){E||(H(y.$$.fragment,D),E=!0)},o(D){L(y.$$.fragment,D),E=!1},d(D){D&&_(t),J(y)}}}function Ze(a){let e,t,s,l,n,o,i,c,r,v,p,w,I,F,M,P,x,Z="资源",N,T,k=[],Q=new Map,V;o=new ie({props:{title:"镜像",name:"name"}}),r=new ie({props:{title:"时间",name:"update"}}),w=new ie({props:{title:"大小",name:"size"}}),M=new ie({props:{title:"状态",name:"status"}});let O=me(a[0]);const G=u=>u[1].name;for(let u=0;u<O.length;u+=1){let m=Be(a,O,u),y=G(m);Q.set(y,k[u]=Ce(y,m))}return{c(){e=h("div"),t=h("table"),s=h("thead"),l=h("tr"),n=h("th"),Y(o.$$.fragment),i=z(),c=h("th"),Y(r.$$.fragment),v=z(),p=h("th"),Y(w.$$.fragment),I=z(),F=h("th"),Y(M.$$.fragment),P=z(),x=h("th"),x.textContent=Z,N=z(),T=h("tbody");for(let u=0;u<k.length;u+=1)k[u].c();this.h()},l(u){e=g(u,"DIV",{class:!0});var m=$(e);t=g(m,"TABLE",{class:!0});var y=$(t);s=g(y,"THEAD",{class:!0});var W=$(s);l=g(W,"TR",{class:!0});var B=$(l);n=g(B,"TH",{class:!0});var X=$(n);K(o.$$.fragment,X),X.forEach(_),i=A(B),c=g(B,"TH",{class:!0});var ee=$(c);K(r.$$.fragment,ee),ee.forEach(_),v=A(B),p=g(B,"TH",{class:!0});var E=$(p);K(w.$$.fragment,E),E.forEach(_),I=A(B),F=g(B,"TH",{class:!0});var D=$(F);K(M.$$.fragment,D),D.forEach(_),P=A(B),x=g(B,"TH",{class:!0,"data-svelte-h":!0}),ae(x)!=="svelte-193gmmq"&&(x.textContent=Z),B.forEach(_),W.forEach(_),N=A(y),T=g(y,"TBODY",{class:!0});var b=$(T);for(let te=0;te<k.length;te+=1)k[te].l(b);b.forEach(_),y.forEach(_),m.forEach(_),this.h()},h(){d(n,"class","svelte-1glvmda"),d(c,"class","svelte-1glvmda"),d(p,"class","svelte-1glvmda"),d(F,"class","svelte-1glvmda"),d(x,"class","svelte-1glvmda"),d(l,"class","svelte-1glvmda"),d(s,"class","svelte-1glvmda"),d(T,"class","svelte-1glvmda"),d(t,"class","svelte-1glvmda"),d(e,"class","w-full overflow-x-auto animate-slideFromBottom md:animate-slideFromLeft svelte-1glvmda")},m(u,m){j(u,e,m),f(e,t),f(t,s),f(s,l),f(l,n),U(o,n,null),f(l,i),f(l,c),U(r,c,null),f(l,v),f(l,p),U(w,p,null),f(l,I),f(l,F),U(M,F,null),f(l,P),f(l,x),f(t,N),f(t,T);for(let y=0;y<k.length;y+=1)k[y]&&k[y].m(T,null);V=!0},p(u,[m]){m&1&&(O=me(u[0]),he(),k=Fe(k,m,G,1,u,O,Q,T,Ge,Ce,null,Be),ge())},i(u){if(!V){H(o.$$.fragment,u),H(r.$$.fragment,u),H(w.$$.fragment,u),H(M.$$.fragment,u);for(let m=0;m<O.length;m+=1)H(k[m]);V=!0}},o(u){L(o.$$.fragment,u),L(r.$$.fragment,u),L(w.$$.fragment,u),L(M.$$.fragment,u);for(let m=0;m<k.length;m+=1)L(k[m]);V=!1},d(u){u&&_(e),J(o),J(r),J(w),J(M);for(let m=0;m<k.length;m+=1)k[m].d()}}}function et(a,e,t){let{mirrors:s}=e;return a.$$set=l=>{"mirrors"in l&&t(0,s=l.mirrors)},[s]}class tt extends oe{constructor(e){super(),ce(this,e,et,Ze,re,{mirrors:0})}}function st(a,e,t){const s=a.slice();return s[0]=e[t],s}function lt(a){let e,t='<td data-cell="镜像" class="svelte-gednbg"><div class="skeleton svelte-gednbg"></div></td> <td data-cell="时间" class="svelte-gednbg"><div class="skeleton svelte-gednbg"></div></td> <td data-cell="大小" class="svelte-gednbg"><div class="skeleton svelte-gednbg"></div></td> <td data-cell="状态" class="svelte-gednbg"><div class="skeleton svelte-gednbg"></div></td> <td data-cell="资源" class="svelte-gednbg"><div class="skeleton svelte-gednbg"></div></td> ';return{c(){e=h("tr"),e.innerHTML=t,this.h()},l(s){e=g(s,"TR",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1gspeiy"&&(e.innerHTML=t),this.h()},h(){d(e,"class","border border-gray-300 dark:border-gray-500 p-5 rounded-xl h-10 svelte-gednbg")},m(s,l){j(s,e,l)},p:S,d(s){s&&_(e)}}}function at(a){let e,t,s,l='<tr class="h-10 svelte-gednbg"><th class="svelte-gednbg">镜像</th> <th class="svelte-gednbg">时间</th> <th class="svelte-gednbg">大小</th> <th class="svelte-gednbg">状态</th> <th class="svelte-gednbg">资源</th></tr>',n,o,i=me({length:20}),c=[];for(let r=0;r<i.length;r+=1)c[r]=lt(st(a,i,r));return{c(){e=h("main"),t=h("table"),s=h("thead"),s.innerHTML=l,n=z(),o=h("tbody");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=g(r,"MAIN",{class:!0});var v=$(e);t=g(v,"TABLE",{class:!0});var p=$(t);s=g(p,"THEAD",{class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-nl49z1"&&(s.innerHTML=l),n=A(p),o=g(p,"TBODY",{class:!0});var w=$(o);for(let I=0;I<c.length;I+=1)c[I].l(w);w.forEach(_),p.forEach(_),v.forEach(_),this.h()},h(){d(s,"class","svelte-gednbg"),d(o,"class","svelte-gednbg"),d(t,"class","svelte-gednbg"),d(e,"class","w-full animate-slideFromBottom md:animate-slideFromLeft svelte-gednbg")},m(r,v){j(r,e,v),f(e,t),f(t,s),f(t,n),f(t,o);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(o,null)},p:S,i:S,o:S,d(r){r&&_(e),Ae(c,r)}}}class nt extends oe{constructor(e){super(),ce(this,e,null,at,re,{})}}function rt(a){const e=a.slice(),t=Pe(qe(e[0],e[1]),e[2]);return e[3]=t,e}function ot(a){let e,t,s,l;const n=[ut,it],o=[];function i(c,r){return c[3].length===0?0:1}return e=i(a),t=o[e]=n[e](a),{c(){t.c(),s=le()},l(c){t.l(c),s=le()},m(c,r){o[e].m(c,r),j(c,s,r),l=!0},p(c,r){let v=e;e=i(c),e===v?o[e].p(c,r):(he(),L(o[v],1,1,()=>{o[v]=null}),ge(),t=o[e],t?t.p(c,r):(t=o[e]=n[e](c),t.c()),H(t,1),t.m(s.parentNode,s))},i(c){l||(H(t),l=!0)},o(c){L(t),l=!1},d(c){c&&_(s),o[e].d(c)}}}function ct(a){let e,t;return e=new nt({}),{c(){Y(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,l){U(e,s,l),t=!0},p:S,i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function it(a){let e,t;return e=new tt({props:{mirrors:a[3]}}),{c(){Y(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,l){U(e,s,l),t=!0},p(s,l){const n={};l&7&&(n.mirrors=s[3]),e.$set(n)},i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function ut(a){let e,t="没有符合条件的结果";return{c(){e=h("p"),e.textContent=t,this.h()},l(s){e=g(s,"P",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-nio30n"&&(e.textContent=t),this.h()},h(){d(e,"class","w-full text-center mt-24")},m(s,l){j(s,e,l)},p:S,i:S,o:S,d(s){s&&_(e)}}}function dt(a){let e,t,s,l;const n=[ct,ot],o=[];function i(r,v){return r[0]?1:0}function c(r,v){return v===1?rt(r):r}return e=i(a),t=o[e]=n[e](c(a,e)),{c(){t.c(),s=le()},l(r){t.l(r),s=le()},m(r,v){o[e].m(r,v),j(r,s,v),l=!0},p(r,[v]){let p=e;e=i(r),e===p?o[e].p(c(r,e),v):(he(),L(o[p],1,1,()=>{o[p]=null}),ge(),t=o[e],t?t.p(c(r,e),v):(t=o[e]=n[e](c(r,e)),t.c()),H(t,1),t.m(s.parentNode,s))},i(r){l||(H(t),l=!0)},o(r){L(t),l=!1},d(r){r&&_(s),o[e].d(r)}}}function ft(a,e,t){let s,l,n;return ue(a,De,o=>t(0,s=o)),ue(a,je,o=>t(1,l=o)),ue(a,fe,o=>t(2,n=o)),He(Oe),[s,l,n]}class bt extends oe{constructor(e){super(),ce(this,e,ft,dt,re,{})}}export{bt as component};
